# yaml-language-server: $schema=../workflow/tools/config.schema.json
description: |
  Experiment with COSMO-1E emulators finetuned on COSMO-1E analysis
  (KENDA-1) at 1km resolution.

dates:
  start: 2020-01-01T12:00
  end: 2020-01-10T00:00
  frequency: 54h

lead_time: 120h

runs:
  - forecaster:
      mlflow_id: 2174c939c8844555a52843b71219d425
      label: Cosmo 1km + era5 N320, finetuned on cerra checkpoint, lam resolution 11
      config: resources/inference/configs/forecaster_no_trimedge_fromtraining.yaml
      inference_resources:
        gpu: 4
        tasks: 4

baselines:
  - baseline:
      baseline_id: COSMO-1E
      label: COSMO-1E
      root: /scratch/mch/bhendj/COSMO-1E
      steps: 0/126/6

analysis:
  label: COSMO KENDA
  analysis_zarr: /scratch/mch/fzanetta/data/anemoi/datasets/mch-co1e-an-archive-0p01-2019-2024-1h-v1-pl13.zarr

locations:
  output_root: output/
  mlflow_uri:
    - https://servicedepl.meteoswiss.ch/mlstore
    - https://mlflow.ecmwf.int

profile:
  executor: slurm
  global_resources:
    gpus: 15
  default_resources:
    slurm_partition: "postproc"
    cpus_per_task: 1
    mem_mb_per_cpu: 1800
    runtime: "1h"
    gpus: 0
  jobs: 50
