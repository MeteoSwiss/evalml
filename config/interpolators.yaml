# yaml-language-server: $schema=../workflow/tools/config.schema.json
description: |
  Stretched interpolator vs LAM interpolator.

dates:
  start: 2020-01-02T00:00
  end: 2020-01-06T12:00
  frequency: 24h

lead_time: 120h

runs:
  - interpolator:
        mlflow_id: 9c18b90074214d769b8b383722fc5a06
        label: LAM Interpolator (COSMO-E analysis)
        steps: 0/121/1
        config: resources/inference/configs/interpolator_from_files.yaml
        forecaster: null
        extra_dependencies:
          - git+https://github.com/MeteoSwiss/anemoi-inference@fix/interp_files
          - torch-geometric==2.6.1
          - anemoi-graphs==0.5.2
  - interpolator:
      mlflow_id: 9c18b90074214d769b8b383722fc5a06
      label: LAM Interpolator (M-1 forecaster)
      steps: 0/121/1
      forecaster:
        mlflow_id: d0846032fc7248a58b089cbe8fa4c511
        config: resources/inference/configs/forecaster_with_global.yaml
      extra_dependencies:
         - git+https://github.com/MeteoSwiss/anemoi-inference@fix/interp_files
         - torch-geometric==2.6.1
         - anemoi-graphs==0.5.2
  - interpolator:
      mlflow_id: 07c3d9698db14d859b78bb712a65bbbf
      label: SGM Interpolator (M-1 forecaster)
      steps: 0/121/1
      config: resources/inference/configs/interpolator_stretched.yaml
      forecaster:
        mlflow_id: d0846032fc7248a58b089cbe8fa4c511
        config: resources/inference/configs/forecaster_with_global.yaml
      extra_dependencies:
         - git+https://github.com/MeteoSwiss/anemoi-inference@fix/interp_files
         - torch-geometric==2.6.1
         - anemoi-graphs==0.5.2

baselines:
  - baseline:
      baseline_id: COSMO-E-1h
      label: COSMO-E
      root: /scratch/mch/bhendj/COSMO-E
      steps: 0/121/1

analysis:
  label: COSMO KENDA
  analysis_zarr: /scratch/mch/fzanetta/data/anemoi/datasets/mch-co2-an-archive-0p02-2015-2020-1h-v3-pl13.zarr

locations:
  output_root: output/
  mlflow_uri:
    # - https://service.meteoswiss.ch/mlstore
    - https://servicedepl.meteoswiss.ch/mlstore
    - https://mlflow.ecmwf.int

profile:
  executor: slurm
  default_resources:
    slurm_partition: "postproc"
    cpus_per_task: 1
    mem_mb_per_cpu: 1800
    runtime: "1h"
  jobs: 10
